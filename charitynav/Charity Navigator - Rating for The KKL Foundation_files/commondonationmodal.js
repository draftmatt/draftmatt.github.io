$(document).ready(function(){$.each($('input[type="radio"]'),function(){if($(this).attr("checked")==="checked"){$(this).next('label').addClass('dark-background-color');$('input[name="other_amt"]').val($(this).val());}});$('input[name="other_amt"]').prop('required',true);});parsleyObject=$('form[name="donation"]').parsley();window.Parsley.on('field:error',function(){this.$element.parent('div').addClass('warning');});window.Parsley.on('field:success',function(){this.$element.parent('div').removeClass('warning');});function resetModal(){$('.show-thanks').hide();$('.gb-edit-accordian-div form').fadeIn(2000);$('.error-message').hide();$('input.cb').removeClass("animate-checkbox");if($('.mobile-modal-next-validate').css('display')=="none"){$('.mobile-donation-ul li').show();}else{$('.mobile-donation-ul').children('.mobile-modal-first').show();$('.mobile-donation-ul').children('.mobile-modal-second').hide();$('.mobile-donation-ul').children('.mobile-modal-third').hide();}
$('.editdonationModal').fadeOut('slow');$('.tributetypeID').prop('required',false);$('.tribute_name').prop('required',false);$('.tribute_name').val('');$('.notification_email').val('');$('.dedicationbox').slideUp('slow');if($('.modal-content').css('width')=='600px'){$('.background-color').animate({height:306},1000);}
$('.background-color').removeClass('modal-taller');$('.tribute-box').attr('checked',false);$('select.tributetypeID option[value="0"]').attr('selected',true);$('select.tributetypeID option[value="1"]').attr('selected',false);$('select.tributetypeID option[value="2"]').attr('selected',false);$('.memory-checkbox').removeClass('check-the-box');setTimeout(function(){if($('.donation_amount_container').hasClass('warning')){var firstRadio=$('.donation_amount_container input[type="radio"]:first-of-type');firstRadio.prop('checked',true);firstRadio.next('label').addClass('dark-background-color');$('input[name="other_amt"]').val(firstRadio.val());$('.donation_amount_container input[type="radio"]').not(firstRadio).prop('checked',false);$('.donation_amount_container input[type="radio"]').not(firstRadio).next('label').removeClass('dark-background-color');parsleyObject.validate();}},1000);}
$.fn.shake=function(options){var settings={'shakes':2,'distance':10,'duration':400};if(options){$.extend(settings,options);}
var pos;return this.each(function(){$this=$(this);pos=$this.css('position');if(!pos||pos==='static'){$this.css('position','relative');}
for(var x=1;x<=settings.shakes;x++){$this.animate({left:settings.distance*-1},(settings.duration/settings.shakes)/4).animate({left:settings.distance},(settings.duration/settings.shakes)/2).animate({left:0},(settings.duration/settings.shakes)/4);}});};$(document).on('click','.editdonationModal .close-accordian-div',function(){resetModal();$('body, html').removeClass('iphone5scroll');$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate();});$('body').click(function(event){if($(event.target).is(".editdonationModal")){resetModal();$('body, html').removeClass('iphone5scroll');}});$(document).on('click','.notgotogivingbasketpage',function(){resetModal();$('.background-color').removeClass('modal-taller');$('body, html').removeClass('iphone5scroll');});$(document).on('change','.tributetypeID',function(){if(this.value==0){$('.tribute_name').val('');$('.notification_email').val('');}});$(document).on('click','.dedication-gift-button',function(){if($('.background-color').hasClass('modal-taller')){$('.tributetypeID').prop('required',false);$('.tribute_name').prop('required',false);$('.tribute_name').val('');$('.notification_email').val('');$('.dedicationbox').slideUp('slow');if($('.modal-content').css('width')=='600px'){$('.background-color').animate({height:306},1000);}
$('.background-color').removeClass('modal-taller');$('.tribute-box').attr('checked',false);$('select.tributetypeID option[value="0"]').attr('selected',true);$('select.tributetypeID option[value="1"]').attr('selected',false);$('select.tributetypeID option[value="2"]').attr('selected',false);$('.memory-checkbox').removeClass('check-the-box');$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate();$('.mobile-absolute').removeClass('inhonor');}else{$('.dedicationbox').slideDown('slow');if($('.modal-content').css('width')=='600px'){$('.background-color').animate({height:440},500);}
$('.background-color').addClass('modal-taller');$('.tribute-box').attr('checked',true);$('select.tributetypeID option[value="1"]').attr('selected',true);$('select.tributetypeID option[value="0"]').attr('selected',false);$('select.tributetypeID option[value="2"]').attr('selected',false);$('.memory-checkbox').addClass('check-the-box');$('.tribute_name').prop('required',true);$('.mobile-absolute').addClass('inhonor');}});$(document).on('click','.donation-label, .donation-label-other',function(){$(this).prev('input').attr("checked",true);$(this).addClass('dark-background-color');$('.donation-label, .donation-label-other').not($(this)).prev('input').attr("checked",false);$('.donation-label, .donation-label-other').not($(this)).removeClass('dark-background-color');$('input[name="other_amt"]').val($(this).prev('input').val());});$(document).on('blur','input[name="other_amt"]',function(){$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate();});$(document).on('click','.donation-label',function(){$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate();});$(document).on('click','.donation-label-other',function(){$('input[name="other_amt"]').val("");$('input[name="other_amt"]').focus();});$(document).on('focus','input[name="other_amt"]',function(){$('.donation-label-other').prev('input').attr("checked",true);$('.donation-label-other').addClass('dark-background-color');$('.donation-label').prev('input').attr("checked",false);$('.donation-label').removeClass('dark-background-color');});var $loading=$('.loadingDiv').hide();$(document).ajaxStart(function(){$loading.show();}).ajaxStop(function(){$loading.hide();});$(document).on('click',"input.add-to-giving-basket",function(){if($('.memory-checkbox').hasClass('check-the-box')){$('.tributetypeID').prop('required',true);$('.tribute_name').prop('required',true);}else{$('.tributetypeID').prop('required',false);$('.tribute_name').prop('required',false);}
$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate();if(!$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().isValid()){$('.background-color').shake();}});$(document).on('click','.mobile-modal-next',function(){if(!$(this).parent('li').find('.parsley-errors-list').hasClass('filled')){var parentli=$(this).parent('li').next();parentli.show();$('.mobile-donation-ul').children('li').not(parentli).hide();}});$(document).on('click','.mobile-modal-next-validate',function(){$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().validate({group:'modal-first',force:false});if(!$(this).closest('.editdonationModal').find('form[name="donation"]').parsley().isValid({group:'modal-first',force:false})){$('.background-color').shake();}});$(document).on('click','.mobile-modal-previous',function(){if(!$(this).parent('li').find('.parsley-errors-list').hasClass('filled')){var parentli=$(this).parent('li').prev();parentli.show();$('.mobile-donation-ul').children('li').not(parentli).hide();}});$(document).on('click','.gb-edit-accordian-div, .show-thanks',function(){if($(this).height()>$(window).height()){$(this).css('padding','20px 10px');}})